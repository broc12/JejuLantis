<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="review.ReviewContent">
	
	<resultMap id="reviewResult" type="ReviewContent">
		<result property="rCount" column="COUNT(ROWNUM)"/>
		<result property="rent_review_no" column="RENT_REVIEW_NO"/>
		<result property="rent_review_date" column="RENT_REVIEW_DATE"/>
		<result property="branch_name" column="BRANCH_NAME"/>
        <result property="name" column="NAME"/>
        <result property="rent_review_rating_car" column="RENT_REVIEW_RATING_CAR"/>
        <result property="rent_review_content" column="RENT_REVIEW_CONTENT"/>
        <result property="car_kind_name" column="CAR_KIND_NAME"/>
        <result property="car_kind_fuel" column="CAR_KIND_FUEL"/>
        <result property="car_kind_type" column="CAR_KIND_TYPE"/>
        <result property="rent_reserv_start" column="RENT_RESERV_START"/>
        <result property="rent_reserv_end" column="RENT_RESERV_END"/>
	</resultMap>
	<select id="reviewContent" parameterType="HashMap" resultMap="reviewResult">
		select Rent_Review.Rent_Review_No, Rent_Review.Rent_Review_Date, RENT_RESERV.RENT_RESERV_START, 
		RENT_RESERV.RENT_RESERV_END, MEMBER.NAME, CAR_KIND.CAR_KIND_NAME, RENT_REVIEW.RENT_REVIEW_RATING_CAR, 
		RENT_REVIEW.RENT_REVIEW_CONTENT
		from RENT_REVIEW, RENT_RESERV, MEMBER, CAR_KIND, BRANCH 
		where RENT_REVIEW.BRANCH_LINE_NO = RENT_RESERV.BRANCH_NO 
		and RENT_REVIEW.MEMEMBER_NO = MEMBER.MEMEMBER_NO
		and RENT_REVIEW.CAR_KIND_NO = CAR_KIND.CAR_KIND_NO
		and BRANCH.BRANCH_LINE_NO = RENT_REVIEW.BRANCH_LINE_NO 
		and RENT_REVIEW.BRANCH_LINE_NO = BRANCH.BRANCH_LINE_NO and BRANCH.BRANCH_LINE_NO = #{a} and  ROWNUM <![CDATA[<=]]>3	
	</select>	

	<select id="reviewContentAll" resultType="ReviewContent">
		select Rent_Review.Rent_Review_No, Rent_Review.Rent_Review_Date, RENT_RESERV.RENT_RESERV_START, 
		RENT_RESERV.RENT_RESERV_END, MEMBER.NAME, BRANCH.BRANCH_NAME,   CAR_KIND.CAR_KIND_NAME ,  RENT_REVIEW.RENT_REVIEW_RATING_CAR, RENT_REVIEW.RENT_REVIEW_CONTENT
		from RENT_REVIEW, RENT_RESERV, MEMBER, CAR_KIND, BRANCH 
		where RENT_REVIEW.BRANCH_LINE_NO = RENT_RESERV.BRANCH_NO 
		and RENT_REVIEW.MEMEMBER_NO = MEMBER.MEMEMBER_NO
		and RENT_REVIEW.CAR_KIND_NO = CAR_KIND.CAR_KIND_NO
		and BRANCH.BRANCH_LINE_NO = RENT_REVIEW.BRANCH_LINE_NO 
		and RENT_REVIEW.BRANCH_LINE_NO = BRANCH.BRANCH_LINE_NO order by BRANCH_NAME		
	</select>
	<delete id="delete" parameterType="String">
	   delete from RENT_REVIEW where RENT_REVIEW_NO=#{rent_review_no}
	</delete>	
	                
</mapper>