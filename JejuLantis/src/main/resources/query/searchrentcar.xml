<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="query.rentcar">

<resultMap id="rentcarSearchResult" type="RentcarSearchResult">
	<result property="totalprice" column="TOTALPRICE"/> 
	<result property="car_kind_no" column="CAR_KIND_NO"/> 
	<result property="car_kind_name" column="CAR_KIND_NAME"/> 
	<result property="car_kind_manufactur" column="CAR_KIND_MANUFACTUR"/> 
	<result property="car_kind_passenger" column="CAR_KIND_PASSENGER"/>
	<result property="car_kind_type" column="CAR_KIND_TYPE"/>
	<result property="car_kind_fuel" column="CAR_KIND_FUEL"/>
	<result property="car_kind_trans" column="CAR_KIND_TRANS"/>
	<result property="branch_name" column="BRANCH_NAME"/>
	<result property="car_kind_price_week" column="CAR_KIND_PRICE_WEEK"/>
	<result property="insurance_price" column="INSURANCE_PRICE"/>
	<result property="insurance_limit" column="INSURANCE_LIMIT"/>
	<result property="car_kind_blackbox" column="CAR_KIND_BLACKBOX"/>
	<result property="car_kind_bluetooth" column="CAR_KIND_BLUETOOTH"/>
	<result property="car_kind_non_smoking_veh" column="CAR_KIND_NON_SMOKING_VEH"/>
	<result property="car_kind_rear_camera" column="CAR_KIND_REAR_CAMERA"/>
	<result property="car_kind_rear_sensors" column="CAR_KIND_REAR_SENSORS"/>
	<result property="car_kind_navi" column="CAR_KIND_NAVI"/>
	<result property="car_kind_sunruff" column="CAR_KIND_SUNRUFF"/>
	<collection property="carlist" javaType="java.util.ArrayList" column="CAR_KIND_NAME" ofType="String" select="getgist"/>
</resultMap>

<select id="rentcarSearch" resultType="RentcarSearchResult">
	SELECT MIN(CAR_KIND_PRICE_WEEK) AS TOTALPRICE, CAR_KIND_NAME, CAR_KIND_FUEL, CAR_KIND_MANUFACTUR, CAR_KIND_TYPE,CAR_KIND_PASSENGER FROM CAR_KIND GROUP BY CAR_KIND_NAME, CAR_KIND_FUEL, CAR_KIND_MANUFACTUR ,CAR_KIND_TYPE,CAR_KIND_PASSENGER ORDER BY TOTALPRICE
</select>

<select id="getgist" resultType="String">
	SELECT CAR_KIND_NAME FROM CAR_KIND
</select>

</mapper>