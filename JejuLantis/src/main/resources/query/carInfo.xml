<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="query.carInfo">

	<resultMap id="carInfoResult" type="CarInfo">
	<result property="car_info_no" column="CAR_INFO_NO"/> 
	<result property="car_no" column="CAR_NO"/> 
	<result property="insurance_no" column="INSURANCE_NO"/> 
	<result property="car_kind_no" column="CAR_KIND_NO"/>
	<result property="branch_no" column="BRANCH_NO"/>
	<result property="car_info_rent_at" column="CAR_INFO_RENT_AT"/>
	<result property="car_info_state" column="CAR_INFO_STATE"/>
	<result property="car_info_withdraw_at" column="CAR_INFO_WITHDRAW_AT"/>
	<result property="car_info_back_no" column="CAR_INFO_BACK_NO"/>
	<result property="car_info_resist" column="CAR_INFO_RESIST"/>
	</resultMap>
	
	<select id="myAddSelect" parameterType="String" resultType="CarInfoInsert">
	SELECT C.CAR_NAME, C.CAR_MANUFACTURER, C.CAR_FUEL ,C.CAR_NO, K.CAR_KIND_NAVI, K.CAR_KIND_SENSOR,
	 K.CAR_KIND_BLACKBOX, K.CAR_KIND_BLUETOOTH, K.CAR_KIND_SUNROOF, K.CAR_KIND_CAMERA, K.CAR_KIND_NONSMOKE,
	 K.CAR_KIND_NO, K.BRANCH_NO  FROM CAR C, CAR_KIND K WHERE C.CAR_NO = K.CAR_NO AND BRANCH_NO=
	 (SELECT BRANCH_NO FROM MANAGER WHERE MANAGER_ID=#{manager_id})
	
	</select>
	<select id="mySelectBrancNo"  resultType="CarInfoInsert">
	SELECT CAR_NO , BRANCH_NO  FROM CAR_KIND  WHERE CAR_KIND_NO = #{car_kind_no}
	</select>

	
    <insert id="myExcelInsert" parameterType="java.util.List">
        insert into CAR_INFO(
            car_info_no,
            car_no,
            insurance_no,
            car_kind_no,
            branch_no,
            car_info_rent_at,
            car_info_state,
            car_info_back_no,
            car_info_resist
        )values
        <foreach collection="excelContent" item="item" separator=",">
        (
            #{item.A},
            #{item.B},
            #{item.C},
            #{item.D},
            #{item.E),
            #{item.F},
            #{item.G},
            #{item.H},
            sysdate
        )
        </foreach>
</insert>
	<insert id="myInsert" parameterType="lIST">
        insert into CAR_INFO(
            car_info_no,
            car_no,
            insurance_no,
            car_kind_no,
            branch_no,
            car_info_rent_at,
            car_info_state,
            car_info_withdraw_at,
            car_info_back_no,
            car_info_resist
            )
	 VALUES
	 	<foreach collection="car" item="item" separator=",">
           (
           CAR_INFO_NO_SEQ.NEXTVAL,
           1111,
           2222,
           3333,
           4444,
           'Y',
           '신차',
           'N',
           #{item.car_info_back_no},
           SYSDATE
           )
        </foreach>
	
	 </insert>


</mapper>